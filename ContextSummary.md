# Context 구조체 종류 요약

필터 드라이버에서 객체와 연관된 정보를 보존하기 위해 FltMgr가 제공하는 컨텍스트를 사용할 수 있습니다.
WDK의 **ctx** 예제에서는 파일 시스템 개체에 다음 세 가지 컨텍스트를 사용하는 방식을 보여 줍니다.

- **FILE_CONTEXT**
  - 특정 파일(stream file object)에 연결됩니다.
  - 동일한 파일을 여러 번 열더라도 하나의 컨텍스트가 공유됩니다.
  - 파일이 완전히 닫힐 때까지 유지되어, 여러 핸들에서 공통으로 접근해야 하는 정보를 저장할 때 적합합니다.

- **STREAM_CONTEXT**
  - 파일의 데이터 스트림 자체에 연결되며, 필터 인스턴스마다 별도로 존재합니다.
  - 파일이 열려 있는 동안 유지되며, 파일 객체가 없어도 접근할 수 있습니다.
  - 대체 스트림 등 파일 데이터와 직접 연관된 상태를 보관할 때 사용합니다.

- **STREAMHANDLE_CONTEXT**
  - 개별 파일 핸들에 대응하는 FILE_OBJECT에 연결됩니다.
  - IRP_MJ_CLEANUP이 호출되면 해제되므로 한 번의 열기에 대한 상태를 저장하는 용도로 사용합니다.
  - 같은 파일을 여러 번 열 경우 각각의 핸들마다 별도의 컨텍스트를 가질 수 있습니다.

이와 같이 컨텍스트는 생명주기와 공유 범위가 다르므로, 필요한 정보가 어느 시점까지 유지되어야 하는지에 따라 적절한 종류를 선택해야 합니다.
